Вся основная работа с выводом остатков на сайте сводится к тому, чтобы правильно вызвать сниппет **getRemains**, а также использовать элемент с классом **mspr-remains** для динамического изменения количества остатков в зависимости от выбранных свойств товара.

## Связанные настройки
Название					| По умолчанию						| Описание
----------------------------|-----------------------------------|-------------------------
**Файл с Javascript**		| [[+assetsUrl]]js/web/<br />msproductremains.js | Путь к файлу с JS-кодом, который отвечает за логику на фронте сайта
**Скрывать количество остатков** | Нет							| Позволяет скрывать точное количество товаров на фронте сайта. Если включено, в элемент с классом **mspr-remains** будут записываться фразы, указанные словаре
**Число остатков для сравнения** | 10								| Если количество остатков товара больше или равно заданному числу, то будет отображаться текст, когда товара много. Если меньше — текст, когда товара мало или нет в наличии. *Работает только при выключенной настройке «Скрывать количество остатков»*

## Связанные записи словаря
Название					| По умолчанию
----------------------------|----------------------------
**mspr_text_more**			| Товар есть в наличии
**mspr_text_less**			| Товара осталось очень мало
**mspr_text_zero**			| Товара нет в наличии

## Вывод на странице товара
На странице товара есть возможность динамического изменения количества оставшихся единиц товара в зависимости от выбранных свойств. К тому же сниппет **getRemains** может вызываться без каких-либо параметров.

### При желании скрыть точное количество остатков
В этом случае стоит включить опцию **Скрывать количество остатков** и использовать готовые записи из словаря. Добавляем в нужном месте чанка **msProduct.content** следующую строку:
```
<div class="mspr-remains">[[!getRemains:gt=`0`:then=`[[%mspr_text_more]]`:else=`[[%mspr_text_zero]]`]]</div>
```

### Для вывода точного количества остатков
Каких-либо записей для этого случая в словаре нет, так что вам необходимо использовать свои фразы. Добавляем в нужном месте чанка **msProduct.content** следующую строку:
```
В наличии: <span class="mspr-remains">[[!getRemains]]</span> шт.
```

Также замечу, что в случае, если оставшихся единиц товаров меньше 1, то к элементу с классом **mspr-remains** добавляется класс **mspr-remains-none**. И добавленный класс удаляется при выборе комбинации с остатком.

## Вывод на странице категории
В стандартной комплектации на страницах категорий выводить можно только общее количество оставшихся единиц товара. Единственным отличием от вывода остатков на странице товара является то, что при вызове сниппета **getRemains** необходимо указать параметр **&id**.

Добавляем в нужном месте чанка **tpl.msProducts.row** следующую строку при желании скрыть точное количество остатков:
```
<div class="mspr-remains">[[!getRemains:gt=`0`:then=`[[%mspr_text_more]]`:else=`[[%mspr_text_zero]]` ?&id=`[[+id]]`]]</div>
```
И нижеуказанную, если желаете вывести точное количество остатков:
```
В наличии: <span class="mspr-remains">[[!getRemains ?&id=`[[+id]]`]]</span> шт.
```
